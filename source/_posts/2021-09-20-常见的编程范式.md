---
title: 常见的编程范式
date: 2021-09-20 09:37:12
urlname: program-thought.html
tags:
categories:
  - 架构与设计模式
---

## 一、术语

### 1.1 模式与模型

模式：模式（Pattern）是解决某一类问题的方法论，把解决某类问题的方法总结归纳到理论高度，就是模式。

模型：模型可以指实物。也可以是概念的模型，模型是由元素、关系、操作以及控制其相互作用的规则组成的概念系统。

既然模型是系统，那么它也应该满足系统的三要件：组成要素、连接方式、功能或目标。

### 1.2 思想-范式-语言

> 编程思想(仅仅是思想层面) →  编程范式(已经形成一套方法论) → 编程语言(编程范式的具体实现，从API的设计中能很明显看出)。

所以，编程语言是对编程思想的实现。如实现面向对象编程思想的编程语言，其标准库就会暴露出功能对象以供使用。

## 二、编程范式

[**编程范型、编程范式或程序设计法**](https://en.wikipedia.org/wiki/Programming_paradigm)(Programming paradigm)：范即模范、典范之意，范式即**模式、方法**

- 是一类典型的编程风格，是指从事软件工程的一类典型的风格（可以对照方法学）。
- 编程范型提供了（同时决定了）程序员对程序执行的看法。例如：
  - 在面向对象编程中，程序员认为程序是一系列相互作用的对象，
  - 在函数式编程中，一个程序会被看作是一个无状态的函数计算的序列。

许多编程范式以其禁止的技术和启用的技术而闻名。例如：纯函数式编程不允许有副作用；结构化编程不允许使用goto。可能是因为这个原因，新的范型常常被那些习惯于较早的风格的人认为是教条主义或过分严格。然而，避免使用某些技术可以更容易地理解程序行为，并证明有关程序正确性的定理。

### 2.1 编程范式和编程语言

正如软件工程中不同的群体会提倡不同的“方法学”一样，不同的编程语言也会提倡不同的“编程范型”。 编程范型和编程语言之间的关系可能十分复杂：

- 一些语言是专门为某个特定的范型设计的（如Smalltalk和Java支持面向对象编程，而Haskell和Scheme则支持函数式编程）
- 还有另一些编程语言支持多种范型（如Ruby、Common Lisp、Python和Oz）。例如，C++设计时，支持过程化编程、面向对象编程以及泛型编程。然而，设计师和程序员们要考虑如何使用这些范型元素来构建一个程序。一个人可以用C++写出一个完全过程化的程序，另一个人也可以用C++写出一个纯粹的面向对象程序，甚至还有人可以写出杂揉了两种范型的程序。

### 2.2 常见的编程范式

- [非结构化编程](https://zh.wikipedia.org/wiki/非結構化程式設計)（对比：结构化）—— 更详细全面的分类可以查看维基百科 — [编程范式](https://en.wikipedia.org/wiki/Programming_paradigm)
- [结构化编程](https://zh.wikipedia.org/wiki/结构化编程)（对比：非结构化）
  - [模块化](https://zh.wikipedia.org/wiki/模块化编程)
  - [面向对象](https://zh.wikipedia.org/wiki/面向对象程序设计)
    - [基于类](https://zh.wikipedia.org/wiki/基于类的编程)
    - [基于原型](https://zh.wikipedia.org/wiki/原型程式設計)
    - 根据关注点分离：
      - [面向切面(Aspect-oriented, AOP)](https://en.wikipedia.org/wiki/Aspect-oriented_programming)
      - [Role-oriented](https://en.wikipedia.org/wiki/Role-oriented_programming)
      - [Subject-oriented](https://en.wikipedia.org/wiki/Subject-oriented_programming)
- [指令式编程](https://zh.wikipedia.org/wiki/指令式编程)（对比：声明式(宣告式)编程）
  - [过程式](https://zh.wikipedia.org/wiki/过程式编程)
- [声明式(宣告式)编程](https://zh.wikipedia.org/wiki/声明式编程)（对比：指令式）
  - [函数式](https://zh.wikipedia.org/wiki/函數程式語言)
  - [数据流式](https://zh.wikipedia.org/wiki/数据流程编程)
    - [响应式](https://zh.wikipedia.org/wiki/响应式编程)


## 三、声明式编程

声明式编程(Declarative programming)或译为宣告式编程，是一种编程范式，通常被定义为除命令式以外的编程范式。它**描述目标的性质，让电脑明白目标，而非流程**。

- 声明式编程不用告诉电脑问题领域，从而避免随之而来的副作用。而**命令式编程则需要用算法来明确的指出每一步该怎么做。**
- 声明式编程通过函数、推理规则或重写规则，来描述变量之间的关系(如React.js  UI = f(state))。它的语言运行器（编译器或解释器）采用了一个固定的算法，以从这些关系产生结果。

声明式语言包包括数据库查询语言(SQL，XQuery)，正则表达式，逻辑编程，函数式编程和组态管理系统。

声明式编程语言通常用作解决人工智能和约束满足问题。

**React是一个声明式编程框架，使得使用者只需要描述目标/状态，怎么实现交给我(框架底层)。**

## 四、面向切面编程(AOP)

面向方面编程 (Aspect-oriented programming，AOP) 是一种编程范式，旨在通过允许分离横切关注点([cross-cutting](https://en.wikipedia.org/wiki/Cross-cutting_concern))来增加模块化。AOP会将横切关注点封装到*切面*(*aspects*)模块中。这允许对处理封装横切关注点的代码进行干净的隔离和重用。

它可以实现在不修改代码本身的情况下，向现有代码添加行为(又称是一个advice)。通过“切入点(point-cut)”规范指定要修改哪些代码，例如：如果函数名称以'set'开头，记录这些函数的调用。

这允许将不属于业务逻辑核心的行为（例如日志记录）添加到程序中，而不会使功能的代码核心混乱。

概念：

- 关注点是对计算机程序代码(*的执行结果*)有影响的一组特定信息。关注点可以**很宽泛**，比如“应用程序的硬件细节”、“数据库交互的细节”；也可以**很具体**，比如“要实例化的类的名称”。
- [Cross-cutting concern](https://en.wikipedia.org/wiki/Cross-cutting_concern)：横切关注点，也是程序的一部分，但它会依赖或影响程序的其他多个部分。
  - 一般是不会影响到系统核心功能的信息，其通常会作为一些附加功能，横切多个核心关注点模块。
  - 比如：日志记录模块。因为日志记录策略必然会影响系统的每个已记录部分。因此，日志记录横切所有记录的类和方法，即日志代码会复制分散到各个相关位置。其他如信息安全、监控、数据验证模块等。
- [Pointcuts](https://en.wikipedia.org/wiki/Pointcut)：切入点，是一组连接点(join points)。切入点指定了需要应用advice的确切位置，也就是嵌入修改代码的地方。切入点通常使用类名或方法名指定，在某些情况下使用匹配类名或方法名的正则表达式。
- [Advice](https://en.wikipedia.org/wiki/Advice_(programming))：描述了一类函数，它会在某些函数运行时，对其进行修改。应用的位置由Pointcuts指定。

通俗点总结：**这种在运行时，动态地将代码切入到类的指定方法、指定位置上的编程思想就是面向切面的编程。**一般，我们管切入到指定类指定方法的代码片段称为切面(aspect)，而切入到哪些类、哪些方法则叫切入点。

*注意，aspect此处不要理解为“方面“，“切面“更符合语义（和一个模块相切的一个面）。*

有了AOP，我们就可以把几个类共有的代码，抽取到一个切片中，等到需要时再切入对象中去，从而改变其原有的行为。

AOP其实只是OOP的一个很有力的补充而已。OOP是从二维上区分出一个个的类来，而AOP则是加上了时间维度，能够从纵向上向对象中加入特定的代码。有了AOP，OOP变得立体了。从技术上来说，Java上的AOP基本上是通过代理机制实现的。 